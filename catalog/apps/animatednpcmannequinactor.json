{"script_excerpt":"app.configure(() => {\n    return [\n        {\n            key: 'emotes',\n            type: 'section',\n            label: 'Emotes',\n        },\n        {\n            key: 'emote0',\n            type: 'file',\n            kind: 'emote',\n            label: 'Idle',\n        }\n    ]\n})\n\n\nconst vrm = app.get('avatar')\n\nif (world.isServer) {\n    // send initial state\n    const state = {\n        ready: true,\n    }\n    app.state = state\n    app.send('state', state)\n    // spawn controller\n    const ctrl = app.create('controller')\n    ctrl.position.copy(app.position)\n    world.add(ctrl)\n    ctrl.quaternion.copy(app.quaternion)\n    ctrl.add(vrm)\n    // read emotes\n    const emoteUrls = {}\n\n    // observe environment\n    let changed = true\n    let notifying = false\n    const info = {\n        world: {\n            id: null, // todo\n            name: null, // todo\n            url: null, // todo\n            context: config.context || 'You are in a virtual world powered by Hyperfy',\n        },\n        you: {\n            id: app.instanceId,\n            name: config.name,\n        },\n        emotes: Object.keys(emoteUrls),\n        triggers: [],\n        events: [],\n    }\n\n    async function notify() {\n        if (!config.url) return\n        changed = false\n        notifying = true\n        console.log('notifying...', info)\n        let data\n        try {\n            const resp = await fetch(config.url, {\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                method: 'POST',\n                body: JSON.stringify(info),\n            })\n            data = await resp.json()\n        } catch (err) {\n            console.error('notify failed')\n        }\n        notifying = false\n        if (!data) return\n        console.log(data)\n        if (data.emote) {\n            const url = emoteUrls[data.emote]\n            app.send('emote', url)\n        }\n    }\n}\n\n// CLIENT\nif (world.isClient) {\n    const config = app.config\n    const idleEmoteUrl = co","script_path":"assets/fe4a4f2dbb9921981776d39f5927c9529b3015650f9b3924bc22dc84238dd7d0.js","source_files":[{"path":"assets/1c6311337cc00e0a3db823716675cf416837af93ea0cc5942345476bdc07aab2.glb","size_bytes":321856},{"path":"assets/3eaa033835e30f2ff4c6df05c81f6d7e79e6d635830bb7a4f7f0701465edaa37.vrm","size_bytes":983832},{"path":"assets/fe4a4f2dbb9921981776d39f5927c9529b3015650f9b3924bc22dc84238dd7d0.js","size_bytes":2818},{"path":"blueprint.json","size_bytes":607},{"path":"manifest.json","size_bytes":795}],"props":{"emote0":{"type":"emote","name":"Looking.glb","url":"asset://1c6311337cc00e0a3db823716675cf416837af93ea0cc5942345476bdc07aab2.glb"}},"asset_files":["1c6311337cc00e0a3db823716675cf416837af93ea0cc5942345476bdc07aab2.glb","3eaa033835e30f2ff4c6df05c81f6d7e79e6d635830bb7a4f7f0701465edaa37.vrm","fe4a4f2dbb9921981776d39f5927c9529b3015650f9b3924bc22dc84238dd7d0.js"],"blueprint_path":"blueprint.json"}