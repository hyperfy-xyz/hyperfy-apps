{
  "name": "Builder_Drone_X501",
  "author": "ash",
  "description": "Flyable builder drone that players trigger via an action prompt, then pilot with WASD/Space/C keys. Animates four rotor nodes, syncs position and quaternion across clients via networked state, and attaches a third-person camera to the drone's view node. Releases control on disconnect or keypress.",
  "tags": [
    "vehicle",
    "camera",
    "physics",
    "animation",
    "interaction",
    "multiplayer"
  ],
  "interaction_modes": [
    "action",
    "networked"
  ],
  "asset_profile": "light",
  "script_complexity": "high",
  "networking": "events",
  "preview_url": "discord/hyp_media/Builder_Drone_X501_1356505487033499729/m2_7BF1F0C5-A1B7-4314-B897-43E2666AB7C8.png",
  "download_path": "https://raw.githubusercontent.com/madjin/hyperfy-apps/main/v2-hyp/Builder_Drone_X501.hyp",
  "created_at": "2025-04-01T05:48:30.762Z",
  "script_excerpt": "export default function main(world, app, fetch, props, setTimeout) {\nconst SEND_RATE = 1 / 5\n\nconst v1 = new Vector3()\nconst v2 = new Vector3()\nconst q1 = new Quaternion()\nconst q2 = new Quaternion()\nconst m1 = new Matrix4()\n\nconst body = app.get('RigidBody')\nconst view = app.get('View')\nconst rotors = [\n  app.get('RotorFL'),\n  app.get('RotorFR'),\n  app.get('RotorBR'),\n  app.get('RotorBL'),\n]\n\napp.remove(body)\n\nif (world.isServer) {\n  body.type = 'dynamic'\n  body.position.copy(app.position)\n  body.quaternion.copy(app.quaternion)\n  world.add(body)\n  const state = app.state\n  state.flyer = null\n  state.p = body.position.toArray()\n  state.q = body.quaternion.toArray()\n  state.ready = true\n  world.on('leave', e => {\n    if (state.flyer === e.playerId) {\n      state.flyer = null\n      app.send('flyer', null)\n      body.type = 'dynamic'\n    }\n  })\n  app.on('fly', (_, playerId) => {\n    if (state.flyer) {\n      return app.sendTo(playerId, 'flyer', state.flyer)\n    }\n    state.flyer = playerId\n    app.send('flyer', state.flyer)\n    body.type = state.flyer ? 'kinematic' : 'dynamic'\n  })\n  app.on('change', (change, playerId) => {\n    if (state.flyer !== playerId) return\n    if (change.p) {\n      state.p = change.p\n      body.position.fromArray(state.p)\n    }\n    if (change.q) {\n      state.q = change.q\n      body.quaternion.fromArray(state.q)\n    }\n    app.send('change', change, playerId)\n  })\n  app.on('release', (_, playerId) => {\n    if (state.flyer !== playerId) return\n    state.flyer = null\n    app.send('flyer', null)\n    body.type = 'dynamic'\n  })\n  let lastChange = 0\n  app.on('fixedUpdate', delta => {\n    if (!state.flyer) {\n      lastChange += delta\n      if (lastChange >= SEND_RATE) {\n        lastChange = 0\n        let didChange\n        const change = {}\n        const p = body.position.toArray()\n        if (!isArrayEqual(state.p, p)) {\n          state.p = p\n          change.p = p\n          didChange = true\n        }\n        const q = body.quaternion.toArray()\n        ",
  "asset_files": [
    "builder-drone-x501.glb"
  ]
}