{"script_excerpt":"app.configure([\n\t{\n\t\tkey: 'emote',\n\t\ttype: 'file',\n\t\tkind: 'emote',\n\t\tlabel: 'Emote'\n\t},\n\t{\n\t\tkey: 'visibleType',\n\t\ttype: 'switch',\n\t\tlabel: 'Visbility Type',\n\t\toptions: [\n\t\t\t{ value: 'visible', label: 'Visible' },\n\t\t\t{ value: 'invisible', label: 'Invisible' }\n\t\t],\n\t\tinitial: 'visible'\n\t}\n])\n\nconst DEG2RAD = Math.PI / 180\nconst state = app.state\n\nif (world.isServer) {\n\tstate.playerId = null\n\tapp.on('request', playerId => {\n\t\tif (state.playerId) return\n\t\tstate.playerId = playerId\n\t\tapp.send('playerId', playerId)\n\t})\n\tapp.on('release', playerId => {\n\t\tif (state.playerId === playerId) {\n\t\t\tstate.playerId = null\n\t\t\tapp.send('playerId', null)\n\t\t}\n\t})\n\tworld.on('leave', e => {\n\t\tif (state.playerId === e.player.networkId) {\n\t\t\tstate.playerId = null\n\t\t\tapp.send('playerId', null)\n\t\t}\n\t})\n}\n\nif (world.isClient) {\n\tconst player = world.getPlayer()\n\tconst trigger = app.get('Trigger')\n\n\t// Handle trigger visibility\n\tif (trigger) {\n\t\tconst updateVisibility = (value) => {\n\t\t\ttrigger.active = value === 'visible'\n\t\t}\n\t\tapp.on('props:visibleType', updateVisibility)\n\t\tupdateVisibility(app.props.visibleType)\n\t}\n\n\t// Setup seat anchor\n\tconst anchor = app.create('anchor', { id: 'seat' })\n\tanchor.position.set(0, 0.12, 0)\n\tanchor.rotation.y = 280 * DEG2RAD\n\tapp.add(anchor)\n\n\t// Setup action button\n\tconst action = app.create('action')\n\taction.position.y = 0.7\n\taction.label = 'Sit'\n\taction.onTrigger = () => {\n\t\tapp.send('request', player.networkId)\n\t}\n\tapp.add(action)\n\n\tif (state.playerId) {\n\t\taction.active = false\n\t}\n\n\tlet control\n\tfunction sit() {\n\t\tif (control) return\n\t\taction.active = false\n\t\tcontrol = app.control()\n\t\tplayer.applyEffect({\n\t\t\tanchor,\n\t\t\temote: app.props.emote?.url,\n\t\t\tcancellable: true,\n\t\t\tonEnd: stand\n\t\t})\n\t}\n\n\tfunction stand() {\n\t\tif (!control) return\n\t\tcontrol.release()\n\t\tcontrol = null\n\t\taction.active = true\n\t\tapp.send('release', player.networkId)\n\t}\n\n\tapp.on('playerId', playerId => {\n\t\tstate.playerId = playerId\n\t\taction.active = !playerId\n\t\tif (playerId === player.ne","script_path":"assets/95f29a69627e4f79d88cad3d9d4440311669e859c95be0b68d747d616ce40378.js","source_files":[{"path":"assets/95f29a69627e4f79d88cad3d9d4440311669e859c95be0b68d747d616ce40378.js","size_bytes":2156},{"path":"assets/ad0dc6273210096fa432edaddea494beaa855cc3f108f2e909c6d4242559a97a.glb","size_bytes":1410320},{"path":"assets/bc106fe8e4158546ce8a5b3565105659b2d8c3b6fc96e7835ac3d8c373a6978c.glb","size_bytes":6260},{"path":"blueprint.json","size_bytes":648},{"path":"manifest.json","size_bytes":786}],"props":{"emote":{"type":"emote","name":"Sitting And Talking To Another Person.glb","url":"asset://ad0dc6273210096fa432edaddea494beaa855cc3f108f2e909c6d4242559a97a.glb"},"visibleType":"visible"},"asset_files":["95f29a69627e4f79d88cad3d9d4440311669e859c95be0b68d747d616ce40378.js","ad0dc6273210096fa432edaddea494beaa855cc3f108f2e909c6d4242559a97a.glb","bc106fe8e4158546ce8a5b3565105659b2d8c3b6fc96e7835ac3d8c373a6978c.glb"],"blueprint_path":"blueprint.json"}