{"script_excerpt":"app.configure([\n    {\n      key: 'emote',\n      type: 'file',\n      kind: 'emote',\n      label: 'Emote'\n    }\n  ])\n  \n  const DEG2RAD = Math.PI / 180\n  const state = app.state\n  const chair = app.get('$root')\n  \n  if (world.isServer) {\n    state.playerId = null\n    app.on('request', playerId => {\n      if (state.playerId) return\n      state.playerId = playerId\n      app.send('playerId', playerId)\n    })\n    app.on('release', playerId => {\n      if (state.playerId === playerId) {\n        state.playerId = null\n        app.send('playerId', null)\n      }\n    })\n    world.on('leave', e => {\n      if (state.playerId === e.player.networkId) {\n        state.playerId = null\n        app.send('playerId', null)\n      }\n    })\n  }\n  \n  if (world.isClient) {\n    const player = world.getPlayer()\n    const anchor = app.create('anchor', { id: 'seat' })\n    anchor.position.set(.07,0.36,0)\n    anchor.rotation.y = 270 * DEG2RAD // 180 degrees (standard sitting direction) + 90 degree adjustment\n    chair.add(anchor)\n    const action = app.create('action')\n    action.position.y = 0.7\n    action.label = 'Sit'\n    action.onTrigger = () => {\n      app.send('request', player.networkId)\n    }\n    chair.add(action)\n    if (state.playerId) {\n      action.active = false\n    }\n    app.on('playerId', playerId => {\n      state.playerId = playerId\n      action.active = !playerId\n      if (playerId === player.networkId) {\n        sit()\n      } else {\n        stand()\n      }\n    })\n    let control \n    function sit() {\n      if (control) return\n      action.active = false\n      control = app.control()\n      player.applyEffect({\n        anchor,\n        emote: props.emote?.url,\n        cancellable: true,\n        onEnd: stand\n      })\n    }\n    function stand() {\n      if (!control) return\n      control.release()\n      control = null\n      action.active = true\n      app.send('release', player.networkId)\n    }\n  }","script_path":"assets/9fc75d47e46d2ca8baf4af2c0e2b667b2b957ffeb10a849ee62d04ebf6b74655.js","source_files":[{"path":"assets/6bbb2ac54cdd0f79dea89db778307a0bd8a48801afeedabc8d1ef0409d626efb.glb","size_bytes":185384},{"path":"assets/9fc75d47e46d2ca8baf4af2c0e2b667b2b957ffeb10a849ee62d04ebf6b74655.js","size_bytes":1985},{"path":"assets/baf63f1f7144c74de2ee291e43c76d4402dc7b23235b5588525c9977811ee634.glb","size_bytes":58276},{"path":"blueprint.json","size_bytes":600},{"path":"manifest.json","size_bytes":786}],"props":{"emote":{"type":"emote","name":"Sitting Still In A Chair.glb","url":"asset://6bbb2ac54cdd0f79dea89db778307a0bd8a48801afeedabc8d1ef0409d626efb.glb"}},"asset_files":["6bbb2ac54cdd0f79dea89db778307a0bd8a48801afeedabc8d1ef0409d626efb.glb","9fc75d47e46d2ca8baf4af2c0e2b667b2b957ffeb10a849ee62d04ebf6b74655.js","baf63f1f7144c74de2ee291e43c76d4402dc7b23235b5588525c9977811ee634.glb"],"blueprint_path":"blueprint.json"}