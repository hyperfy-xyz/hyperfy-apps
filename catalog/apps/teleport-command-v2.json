{"script_excerpt":"\n\napp.configure([\n  {\n    key: 'cmd',\n    type: 'text',\n    label: 'Command',\n    hint: `The command that triggers the teleport, without the slash, eg 'home'.`\n  },\n  {\n    key: 'btn',\n    type: 'button',\n    label: 'Set Destination',\n    hint: 'Sets the destination to the same position and direction you are currently standing in.',\n    onClick: () => app.send('set')\n  },\n])\n\nconst cmd = props.cmd\n\nif (world.isServer) {\n  const key = `destination_${app.instanceId}`\n  const state = app.state\n  state.dest = world.get(key)\n  state.ready = true\n  app.on('set', (_, playerId) => {\n    const player = world.getPlayer(playerId)\n    state.dest = {\n      position: player.position.toArray(),\n      rotationY: player.rotation.y\n    }\n    world.set(key, state.dest)\n    app.send('dest', state.dest)\n  })\n  app.send('init', state)\n}\n\nif (world.isClient) {\n  console.log(app.state)\n  if (app.state.ready) {\n    init(app.state)\n  } else {\n    app.on('init', init)\n  }\n  function init(state) {\n    app.on('dest', dest => {\n      state.dest = dest\n    })\n    world.on('command', e => {\n      if (e.args[0] !== cmd) return\n      if (!state.dest) return\n      const player = world.getPlayer()\n      const position = new Vector3().fromArray(state.dest.position)\n      const rotationY = state.dest.rotationY\n      player.teleport(position, rotationY)\n    })\n  }\n}","script_path":"assets/e78f34a2ca35a2753b902d7820af57efc655b183f9c09d3c2e4e789deefdce94.js","source_files":[{"path":"assets/39ad1b405cbf41a90825dadf0b554f3c3baba634636bb94a1057dd8ec0784c86.png","size_bytes":2777},{"path":"assets/97fc7289a38b5b49357e6fbd74e7e77fc78493dbb1c0dbc850cb8e9db9fd2530.glb","size_bytes":3380},{"path":"assets/9b55dac6a82f41cb61631b3e8c84607dcf0ff9a48d38639bc9c8715fdb15ea55.glb","size_bytes":170188},{"path":"assets/e78f34a2ca35a2753b902d7820af57efc655b183f9c09d3c2e4e789deefdce94.js","size_bytes":1349},{"path":"blueprint.json","size_bytes":784},{"path":"manifest.json","size_bytes":1038}],"props":{"collision":true,"emote":{"type":"emote","name":"dance2.glb","url":"asset://9b55dac6a82f41cb61631b3e8c84607dcf0ff9a48d38639bc9c8715fdb15ea55.glb"},"cmd":"home"},"asset_files":["39ad1b405cbf41a90825dadf0b554f3c3baba634636bb94a1057dd8ec0784c86.png","97fc7289a38b5b49357e6fbd74e7e77fc78493dbb1c0dbc850cb8e9db9fd2530.glb","9b55dac6a82f41cb61631b3e8c84607dcf0ff9a48d38639bc9c8715fdb15ea55.glb","e78f34a2ca35a2753b902d7820af57efc655b183f9c09d3c2e4e789deefdce94.js"],"blueprint_path":"blueprint.json"}