{"script_excerpt":"const fields = [\n  {\n    key: 'collision',\n    type: 'toggle',\n    label: 'Collision',\n    initial: true,\n    hint: 'Forces all meshes to have collision. Disable this if your model already has embedded collision.'\n  }\n]\n\nlet anims = [{ label: 'None', value: '' }]\napp.traverse(node => {\n  if (node.anims) {\n    for (const anim of node.anims) {\n      anims.push({\n        label: anim,\n        value: anim,\n      })\n    }\n  }\n})\nif (anims.length) {\n  fields.push({\n    key: 'anim',\n    type: 'switch',\n    label: 'Animation',\n    options: anims,\n    initial: '',\n  })\n}\n\napp.configure(fields)\n\nconst collision = props.collision\n\nif (collision) {\n  const m1 = new Matrix4()\n  const appInverseMatrix = app.matrixWorld.clone().invert()\n  const body = app.create('rigidbody')\n  app.traverse(node => {\n    if (node.name === 'mesh') {\n      const collider = app.create('collider')\n      collider.type = 'geometry'\n      collider.geometry = node.geometry\n      m1.copy(node.matrixWorld).premultiply(appInverseMatrix).decompose(\n        collider.position,\n        collider.quaternion,\n        collider.scale\n      )\n      body.add(collider)\n    }\n  })\n  body.position.copy(app.position)\n  body.quaternion.copy(app.quaternion)\n  body.scale.copy(app.scale)\n  world.add(body)\n}\n\nconst anim = config.anim\nif (anim) {\n  app.traverse(node => {\n    if (node.anims && node.anims.includes(anim)) {\n      node.play({ name: anim })\n    }\n  })\n}","script_path":"assets/fe744582ff339b21618e4a184aa73e2a7aa48e15facf2c773c2012ca335eab47.js","source_files":[{"path":"assets/39ad1b405cbf41a90825dadf0b554f3c3baba634636bb94a1057dd8ec0784c86.png","size_bytes":2777},{"path":"assets/97fc7289a38b5b49357e6fbd74e7e77fc78493dbb1c0dbc850cb8e9db9fd2530.glb","size_bytes":3380},{"path":"assets/fe744582ff339b21618e4a184aa73e2a7aa48e15facf2c773c2012ca335eab47.js","size_bytes":1423},{"path":"blueprint.json","size_bytes":607},{"path":"manifest.json","size_bytes":777}],"props":{"collision":true,"anim":""},"asset_files":["39ad1b405cbf41a90825dadf0b554f3c3baba634636bb94a1057dd8ec0784c86.png","97fc7289a38b5b49357e6fbd74e7e77fc78493dbb1c0dbc850cb8e9db9fd2530.glb","fe744582ff339b21618e4a184aa73e2a7aa48e15facf2c773c2012ca335eab47.js"],"blueprint_path":"blueprint.json"}