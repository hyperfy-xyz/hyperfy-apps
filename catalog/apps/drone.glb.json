{"script_excerpt":"const UP = new Vector3(0,1,0)\nconst FORWARD = new Vector3(0,0,1)\nconst v1 = new Vector3()\nconst v2 = new Vector3()\nconst v3 = new Vector3()\nconst q1 = new Quaternion()\nconst euler = new Euler()\nconst body = app.get('RigidBody')\nconst frame = app.get('Frame')\nconst rotors = [\n  app.get('RotorFL'),\n  app.get('RotorFR'),\n  app.get('RotorBR'),\n  app.get('RotorBL'), \n]\n\n// Physics constants\nconst THRUST_POWER = 35\nconst TILT_SPEED = 2.5\nconst MAX_TILT = 0.5\nconst DAMPING = 0.92\nconst ROTATION_DAMPING = 100\nconst GRAVITY = -12\nconst THROTTLE_SPEED = 1.5\nconst MIN_THROTTLE = 0.35\nconst MOVEMENT_FORCE = 12\nconst TILT_FORCE = 3\nconst STABILIZE_FORCE = 2.5\nconst TORQUE_FORCE = 3\n\n// move body to world space\nworld.attach(body)\n\nlet mode\nconst setMode = fn => {\n  mode?.()\n  mode = fn()\n}\n\n// console.log('v', app.version)\n\nif (world.isServer) {\n  function idle() {\n    body.type = 'dynamic'\n    let elapsed = 0\n    const update = delta => {\n      elapsed += delta\n      if (elapsed > 1/8) {\n        elapsed = 0\n        body.position.toArray(app.state.position)\n        body.quaternion.toArray(app.state.quaternion)\n        app.send('info', [\n          null,\n          app.state.position,\n          app.state.quaternion,\n        ])      \n      }\n    }\n    const info = (data, networkId) => {\n      app.state.flyer = data[0]\n      app.state.position = data[1]\n      app.state.quaternion = data[2]\n      body.position.fromArray(data[1])\n      body.quaternion.fromArray(data[2])\n      app.send('info', data, networkId)\n      setMode(flying)\n    }\n    app.on('update', update)\n    app.on('info', info)\n    return () => {\n      app.off('update', update)\n      app.off('info', info)\n    }\n  }\n  function flying() {\n    body.type = 'kinematic'\n    const info = (data, networkId) => {\n      app.state.flyer = data[0]\n      app.state.position = data[1]\n      app.state.quaternion = data[2]\n      body.position.fromArray(data[1])\n      body.quaternion.fromArray(data[2])\n      app.send('info', data, networkId)\n ","script_path":"assets/6f2ce0345f8c73703a13ee0b0e96cd61a1c8a630fa737486d1e8eafbbcb389fc.js","source_files":[{"path":"assets/6f2ce0345f8c73703a13ee0b0e96cd61a1c8a630fa737486d1e8eafbbcb389fc.js","size_bytes":10784},{"path":"assets/7fc907feb9f6d24e5c1da679726d972c3769dab318a7d9b38e83ebd2f85d4813.glb","size_bytes":263772},{"path":"blueprint.json","size_bytes":384},{"path":"manifest.json","size_bytes":527}],"asset_files":["6f2ce0345f8c73703a13ee0b0e96cd61a1c8a630fa737486d1e8eafbbcb389fc.js","7fc907feb9f6d24e5c1da679726d972c3769dab318a7d9b38e83ebd2f85d4813.glb"],"blueprint_path":"blueprint.json"}