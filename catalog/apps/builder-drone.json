{"script_excerpt":"export default function main(world, app, fetch, props, setTimeout) {\nconst SEND_RATE = 1 / 5\n\n// Configure props for customization\napp.configure([\n  {\n    key: 'controlKey',\n    type: 'text',\n    label: 'Drone Control Key',\n    initial: 'P',\n  },\n  {\n    key: 'holdDuration',\n    type: 'number',\n    label: 'Hold Duration (seconds)',\n    min: 0.1,\n    max: 2.0,\n    step: 0.1,\n    dp: 1,\n    initial: 0.5,\n  },\n])\n\nconst v1 = new Vector3()\nconst v2 = new Vector3()\nconst q1 = new Quaternion()\nconst q2 = new Quaternion()\nconst m1 = new Matrix4()\n\nconst body = app.get('RigidBody')\nconst view = app.get('View')\nconst rotors = [app.get('RotorFL'), app.get('RotorFR'), app.get('RotorBR'), app.get('RotorBL')]\n\napp.remove(body)\nbody.position.add(app.position)\nbody.quaternion.multiply(app.quaternion)\n\nif (world.isServer) {\n  body.type = 'dynamic'\n  world.add(body)\n  const state = app.state\n  state.flyer = null\n  state.p = body.position.toArray()\n  state.q = body.quaternion.toArray()\n  state.ready = true\n  app.on('fly', (_, playerId) => {\n    if (state.flyer) {\n      return app.sendTo(playerId, 'flyer', state.flyer)\n    }\n    state.flyer = playerId\n    app.send('flyer', state.flyer)\n    body.type = state.flyer ? 'kinematic' : 'dynamic'\n  })\n  app.on('change', (change, playerId) => {\n    if (state.flyer !== playerId) return\n    if (change.p) {\n      state.p = change.p\n      body.position.fromArray(state.p)\n    }\n    if (change.q) {\n      state.q = change.q\n      body.quaternion.fromArray(state.q)\n    }\n    app.send('change', change, playerId)\n  })\n  app.on('release', (_, playerId) => {\n    if (state.flyer !== playerId) return\n    state.flyer = null\n    app.send('flyer', null)\n    body.type = 'dynamic'\n  })\n  let lastChange = 0\n  app.on('fixedUpdate', delta => {\n    if (!state.flyer) {\n      lastChange += delta\n      if (lastChange >= SEND_RATE) {\n        lastChange = 0\n        let didChange\n        const change = {}\n        const p = body.position.toArray()\n        if (!isArrayEqual","script_path":"index.js","source_files":[{"path":"Builder Drone.json","size_bytes":334},{"path":"assets/builder-drone.glb","size_bytes":263848},{"path":"index.js","size_bytes":8043}],"props":{"controlKey":"P","holdDuration":1},"asset_files":["builder-drone.glb"],"blueprint_path":"Builder Drone.json"}