{"script_excerpt":"app.configure([\n  {\n    key: 'emote',\n    type: 'file',\n    kind: 'emote',\n    label: 'Emote'\n  }\n])\n\nconst state = app.state\nconst duck = app.get('$root')\n\nif (world.isServer) {\n  state.playerId = null\n  app.on('request', playerId => {\n    if (state.playerId) return\n    state.playerId = playerId\n    app.send('playerId', playerId)\n  })\n  app.on('release', playerId => {\n    if (state.playerId === playerId) {\n      state.playerId = null\n      app.send('playerId', null)\n    }\n  })\n  world.on('leave', e => {\n    if (state.playerId === e.player.networkId) {\n      state.playerId = null\n      app.send('playerId', null)\n    }\n  })\n}\n\nif (world.isClient) {\n  const player = world.getPlayer()\n  const anchor = app.create('anchor', { id: 'seat' })\n  anchor.position.y = 0.55\n  anchor.position.x = -.38\n  anchor.position.z = .11\n  anchor.rotation.y += 270 * DEG2RAD\n  duck.add(anchor)\n  const action = app.create('action')\n  action.position.y = 0.7\n  action.label = 'Sit'\n  action.onTrigger = () => {\n    app.send('request', player.networkId)\n  }\n  duck.add(action)\n  if (state.playerId) {\n    action.active = false\n  }\n  app.on('playerId', playerId => {\n    state.playerId = playerId\n    action.active = !playerId\n    if (playerId === player.networkId) {\n      sit()\n    } else {\n      stand()\n    }\n  })\n  let control \n  function sit() {\n    if (control) return\n    action.active = false\n    control = app.control()\n    control.setEffect({\n      anchor,\n      emote: props.emote?.url,\n      cancellable: true,\n      onEnd: stand\n    })\n    app.on('update', update)\n\n  }\n\n  function stand() {\n    if (!control) return\n    control.release()\n    control = null\n    action.active = true\n    app.off('update', update)\n    app.send('release', player.networkId)\n  }\n\n  function update(delta) {\n    // No rotation handling, you can remove this function or leave it empty\n  }\n}","script_path":"assets/34be35605cc91a8e669cf60f67737e555a59b567852a93d11c4c5c5b5aeb07ef.js","source_files":[{"path":"assets/3273c901786ea3eb3111457f746d96d5f35406856f403626606229cf9284e9f9.glb","size_bytes":200632},{"path":"assets/34be35605cc91a8e669cf60f67737e555a59b567852a93d11c4c5c5b5aeb07ef.js","size_bytes":1953},{"path":"assets/cdd6b597b95798b73a5c55ec2e8e3bbc66b231ab7fa852141a1fe96cf545ce9d.glb","size_bytes":275636},{"path":"blueprint.json","size_bytes":589},{"path":"manifest.json","size_bytes":787}],"props":{"emote":{"type":"emote","name":"Aim Pistol While Sitting.glb","url":"asset://3273c901786ea3eb3111457f746d96d5f35406856f403626606229cf9284e9f9.glb"}},"asset_files":["3273c901786ea3eb3111457f746d96d5f35406856f403626606229cf9284e9f9.glb","34be35605cc91a8e669cf60f67737e555a59b567852a93d11c4c5c5b5aeb07ef.js","cdd6b597b95798b73a5c55ec2e8e3bbc66b231ab7fa852141a1fe96cf545ce9d.glb"],"blueprint_path":"blueprint.json"}