{"script_excerpt":"\n/** ICON SETUP CODE\n * - if you change the model of this script, you can delete the snippet below\n */\nconst selected = \"Wifi_01\"\napp.traverse(node => {\n  if (node.parent?.id == '$root') {\n    if (app.config.buttonType === node.id) return\n    node.active = false\n  }\n})\n/// END SNIPPET\n\n\n\nfunction parseTemplate(template, values) {\n  return template.replace(/\\${(\\w+)}/g, (match, key) => {\n    return values[key] !== undefined ? values[key] : match;\n  });\n}\n\napp.configure([\n  {\n    key: 'broadcastChat',\n    type: 'switch',\n    label: 'broadcast',\n    options: [\n      { label: 'on', value: true },\n      { label: 'off', value: false },\n    ],\n  },\n  {\n    key: 'webhook',\n    type: 'text',\n    label: \"Webhook URL\"\n  },\n])\n\nif (world.isServer) {\n  // Function to send message to Discord webhook\n  const hitDiscordWebhook = async (message) => {\n    if (!app.config.webhook) {\n      console.error(\"Error: Discord webhook URL is not provided!\");\n      return false;\n    }\n\n    try {\n      const response = await fetch(app.config.webhook, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          content: message\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Discord webhook error: ${response.status}`);\n      }\n\n      return true;\n    } catch (error) {\n      console.error(`Failed to send message to Discord: ${error.message}`);\n      return false;\n    }\n  };\n\n  if (app.config.broadcastChat) {\n    // Validate webhook URL\n    if (!app.config.webhook) {\n      console.error(\"ERROR: Discord webhook URL is required when broadcast is enabled!\");\n    } else {\n      // Chat handler\n      world.on('chat', async msg => {\n        const from = msg.from || 'Unknown';\n        const body = msg.body || '';\n        const fromId = msg.fromId || '';\n\n        const template = msg.from === 'Anonymous' ?\n          `[${msg.fromId}]: ${msg.body} ` :\n          `[${from}]: ${body} `;\n\n        const par","script_path":"assets/761c9f87f76499b9a4120b5078943aeb9bd4671a02da83f176fb273058a9782b.js","source_files":[{"path":"assets/1dc9c9a2108f54261e8b43f7c3a1a99664c2a444d861fcc9a15c8faea21de7d4.glb","size_bytes":7249332},{"path":"assets/761c9f87f76499b9a4120b5078943aeb9bd4671a02da83f176fb273058a9782b.js","size_bytes":3061},{"path":"assets/cec436e6df52c64e5a3737f7f53ee86de697de2e660440c60a464fb76d8b2cbc.jpeg","size_bytes":3777},{"path":"blueprint.json","size_bytes":659},{"path":"manifest.json","size_bytes":783}],"props":{"buttonType":"Wifi_01","webhook":"","broadcastChat":true},"asset_files":["1dc9c9a2108f54261e8b43f7c3a1a99664c2a444d861fcc9a15c8faea21de7d4.glb","761c9f87f76499b9a4120b5078943aeb9bd4671a02da83f176fb273058a9782b.js","cec436e6df52c64e5a3737f7f53ee86de697de2e660440c60a464fb76d8b2cbc.jpeg"],"blueprint_path":"blueprint.json"}