{"script_excerpt":"if (world.isClient) {\n  let mode\n  const setMode = fn => {\n    mode?.()\n    mode = fn()\n  }\n\n  function builderMode() {\n    let control = app.control({\n      onPress: code => {\n        if (code === 'KeyF') {\n          console.log(\"// start GameMode\")\n          setMode(gameMode)\n        }\n        // return true\n      }\n    })\n\n    control.pointer.unlock()\n    control._looking = false\n\n    modeSet('building')\n\n    return () => {\n      control.release();\n    }\n  }\n\n  function modeSet(modeName) {\n    const msg = {\n      id: uuid(),\n      from: \"SYSTEM\",\n      fromId: app.instanceId,\n      body: `${modeName} mode`,\n      createdAt: world.getTimestamp(),\n    };\n    world.chat(msg, false);\n  }\n  function gameMode() {\n    let control = app.control({\n      onPress: code => {\n        if (code === 'KeyF') {\n          setMode(builderMode)\n        }\n        // return true\n      },\n      onRelease: code => {\n        if (code === 'MouseRight') {\n          return true;\n        }\n      },\n    })\n\n    control.pointer.lock()\n    control._looking = true\n\n    modeSet('game')\n\n    return () => {\n      control.release();\n    }\n  }\n\n  setMode(builderMode)\n}","script_path":"assets/943474fb85468f1f1982d6c57f8f9e47d8b000ec42b20cd60e818fb1805a1600.js","source_files":[{"path":"assets/943474fb85468f1f1982d6c57f8f9e47d8b000ec42b20cd60e818fb1805a1600.js","size_bytes":1215},{"path":"assets/a624f445ae3354beb5b99a8ca139e2aaf201683aea3b0551a41df6872aec59f2.glb","size_bytes":271300},{"path":"blueprint.json","size_bytes":387},{"path":"manifest.json","size_bytes":526}],"asset_files":["943474fb85468f1f1982d6c57f8f9e47d8b000ec42b20cd60e818fb1805a1600.js","a624f445ae3354beb5b99a8ca139e2aaf201683aea3b0551a41df6872aec59f2.glb"],"blueprint_path":"blueprint.json"}