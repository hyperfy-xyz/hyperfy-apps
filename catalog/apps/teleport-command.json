{"script_excerpt":"export default function main(world, app, fetch, props, setTimeout) {\n\n\napp.configure([\n  {\n    key: 'cmd',\n    type: 'text',\n    label: 'Command',\n    hint: `The command that triggers the teleport, without the slash, eg 'home'.`\n  },\n  {\n    key: 'btn',\n    type: 'button',\n    label: 'Set Destination',\n    hint: 'Sets the destination to the same position and direction you are currently standing in.',\n    onClick: () => app.send('set')\n  },\n])\n\nconst cmd = props.cmd\n\nif (world.isServer) {\n  const key = `destination_${app.instanceId}`\n  const state = app.state\n  state.dest = world.get(key)\n  state.ready = true\n  app.on('set', (_, playerId) => {\n    const player = world.getPlayer(playerId)\n    state.dest = {\n      position: player.position.toArray(),\n      rotationY: player.rotation.y\n    }\n    world.set(key, state.dest)\n    app.send('dest', state.dest)\n  })\n  app.send('init', state)\n}\n\nif (world.isClient) {\n  console.log(app.state)\n  if (app.state.ready) {\n    init(app.state)\n  } else {\n    app.on('init', init)\n  }\n  function init(state) {\n    app.on('dest', dest => {\n      state.dest = dest\n    })\n    world.on('command', e => {\n      if (e.args[0] !== cmd) return\n      if (!state.dest) return\n      const player = world.getPlayer()\n      const position = new Vector3().fromArray(state.dest.position)\n      const rotationY = state.dest.rotationY\n      player.teleport(position, rotationY)\n    })\n  }\n}\n}\n","script_path":"index.js","source_files":[{"path":"Teleport Command.json","size_bytes":464},{"path":"assets/emote.glb","size_bytes":170188},{"path":"assets/teleport-command.glb","size_bytes":3380},{"path":"assets/teleport-command__image.png","size_bytes":2777},{"path":"index.js","size_bytes":1421}],"props":{"collision":true,"emote":{"type":"emote","url":"assets/emote.glb"},"cmd":"home"},"asset_files":["emote.glb","teleport-command.glb","teleport-command__image.png"],"blueprint_path":"Teleport Command.json"}