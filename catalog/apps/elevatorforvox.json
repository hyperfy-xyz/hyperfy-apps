{"script_excerpt":"/**\n * Elevator Logic with Screen Space UI - Hyperfy V2\n * Creates a 36x36 pixel square UI in the top right corner\n * Only visible when player is within 10 meters of the app\n * 15 floors (0-15), 11 meters between floors\n * \n * @author Akerboom\n * @license MIT\n */\n\n// Distance threshold for UI visibility (3 meters)\nconst UI_VISIBILITY_DISTANCE = 3;\n\n// Track if app is fully initialized\nlet appInitialized = false;\nlet playerReady = false;\n\n// Track last player position to detect movement\nlet lastPlayerPosition = null;\n\n// Get elevator mesh reference once at initialization\nlet elevatorMesh = null;\n\n// Function to check distance and update UI visibility\nfunction updateUIVisibility() {\n  if (!world.isClient || !appInitialized || !playerReady) {\n    return;\n  }\n  \n  const player = world.getPlayer();\n  if (!player || !player.position) {\n    return;\n  }\n  \n  let playerPos;\n  try {\n    playerPos = player.position;\n  } catch (error) {\n    return;\n  }\n  \n  if (!playerPos || typeof playerPos.distanceTo !== 'function') {\n    return;\n  }\n  \n  let appPos;\n  try {\n    appPos = app.position;\n  } catch (error) {\n    return;\n  }\n  \n  if (!appPos || typeof appPos.distanceTo !== 'function') {\n    return;\n  }\n  \n  try {\n    // Calculate horizontal distance (X and Z axes only, ignoring Y)\n    const horizontalDistance = Math.sqrt(\n      Math.pow(playerPos.x - appPos.x, 2) + \n      Math.pow(playerPos.z - appPos.z, 2)\n    );\n    \n    // Check if player has moved significantly (more than 0.5 meters)\n    if (lastPlayerPosition && typeof lastPlayerPosition.distanceTo === 'function') {\n      const movementDistance = playerPos.distanceTo(lastPlayerPosition);\n      // Temporarily disable movement threshold for debugging\n      // if (movementDistance < 0.5) return; // Skip update if player hasn't moved much\n    }\n    \n    lastPlayerPosition = playerPos.clone();\n    \n    // Toggle UI visibility based on horizontal distance only\n    const shouldShowUI = horizontalDistance <= UI_VISIBILITY_DISTANCE;\n ","script_path":"assets/b825d0b498f66cc26b5da67e6ceb6a1349a852e32a2dc4b84194374dd0fb4216.js","source_files":[{"path":"assets/61f098263bf530dc29e91ecb337b886fb3b568aa9ced31f1c019cf8633485564.glb","size_bytes":7104},{"path":"assets/b825d0b498f66cc26b5da67e6ceb6a1349a852e32a2dc4b84194374dd0fb4216.js","size_bytes":18151},{"path":"blueprint.json","size_bytes":474},{"path":"manifest.json","size_bytes":525}],"asset_files":["61f098263bf530dc29e91ecb337b886fb3b568aa9ced31f1c019cf8633485564.glb","b825d0b498f66cc26b5da67e6ceb6a1349a852e32a2dc4b84194374dd0fb4216.js"],"blueprint_path":"blueprint.json"}