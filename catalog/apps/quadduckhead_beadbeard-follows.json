{"script_excerpt":"/* eslint-disable no-inner-declarations */\n/* eslint-disable no-undef */\n\n// -------------------------------------------------------------------\n// CONFIGURATION\n// -------------------------------------------------------------------\napp.configure([\n  {\n    key: 'target',\n    label: 'Player Follow Target',\n    type: 'text'\n  },\n  {\n    key: 'avoidance_distance',\n    label: 'Avoidance Distance',\n    type: 'text',\n    initial: '4'\n  },\n  {\n    key: 'follow_speed',\n    label: 'Follow Speed',\n    type: 'text',\n    initial: '2.2'\n  },\n  {\n    key: 'rotation_speed',\n    label: 'Rotation Speed',\n    type: 'text',\n    initial: '2.2'\n  }\n]);\n\nconsole.log(app)\nconsole.log(world)\n\n\n// -------------------------------------------------------------------\n// CONSTANTS & GLOBALS\n// -------------------------------------------------------------------\nconst SEND_RATE = 1 / 8;\nconst FOLLOW_SPEED = Number.parseFloat(props.follow_speed);\nconst AVOIDANCE_DISTANCE = Number.parseFloat(props.avoidance_distance);\nconst ROTATION_SPEED = Number.parseFloat(props.rotation_speed);  // Used to slerp toward the target\nconst _direction = new Vector3();\nconst _forward = new Vector3();\nconst _velocity = new Vector3();\n\nlet ownerId = null;\n\n// -------------------------------------------------------------------\n// HELPER: moveTowardsPos\n// -------------------------------------------------------------------\nfunction moveTowardsPos(currentPos, currentQuat, targetPos) {\n  // Calculate horizontal direction: targetPos - currentPos\n  _direction.copy(targetPos).sub(currentPos);\n  _direction.y = 0; // ignore vertical\n\n  const distance = _direction.length();\n\n  // If within avoidance distance, no movement\n  if (distance < AVOIDANCE_DISTANCE) {\n    return _velocity.set(0, 0, 0);\n  }\n\n  // Find forward direction from currentQuat\n  _forward.set(0, 0, 1).applyQuaternion(currentQuat).normalize();\n\n  // Always move forward at FOLLOW_SPEED:\n  _velocity.copy(_forward).multiplyScalar(FOLLOW_SPEED);\n\n  return _velocity;\n}\n\n","script_path":"assets/0734a91ec0dd8836538175814d1fd902b3ff7c9409a68916c8fd3185e46b2270.js","source_files":[{"path":"assets/0734a91ec0dd8836538175814d1fd902b3ff7c9409a68916c8fd3185e46b2270.js","size_bytes":6015},{"path":"assets/817349cd19cc6fad78611a31f8b3f1f7fd6ec562570ddb9860394f377e7e1581.glb","size_bytes":363916},{"path":"assets/a5497ec709d2a37e6b675a7d2640d8d0b54e81bceb3b96560aceee8e0a510fc4.jpg","size_bytes":147},{"path":"blueprint.json","size_bytes":807},{"path":"manifest.json","size_bytes":785}],"props":{"app_root":"Rigidapp","app_mass":"5.2","app_type":"dynamic","target":"pP0N6MzpQr","avoidance_distance":"4","follow_speed":"2.2","rotation_speed":"2.2"},"asset_files":["0734a91ec0dd8836538175814d1fd902b3ff7c9409a68916c8fd3185e46b2270.js","817349cd19cc6fad78611a31f8b3f1f7fd6ec562570ddb9860394f377e7e1581.glb","a5497ec709d2a37e6b675a7d2640d8d0b54e81bceb3b96560aceee8e0a510fc4.jpg"],"blueprint_path":"blueprint.json"}