{
  "name": "Networked_Grabbable",
  "author": "Saori",
  "description": "Networked grabbable object (e.g. a gun) that players pick up via an action trigger within 3m. Attaches the 3D model to the holder's right hand bone transform each frame and syncs ownership state across clients. Press X to drop the item where you stand.",
  "tags": [
    "interaction",
    "multiplayer",
    "3d-model",
    "animation"
  ],
  "interaction_modes": [
    "action",
    "networked"
  ],
  "asset_profile": "medium",
  "script_complexity": "medium",
  "networking": "events",
  "preview_url": "generated_previews/networked-grabbable.png",
  "download_path": "https://raw.githubusercontent.com/hyperfy-xyz/hyperfy-apps/main/hyp-files/Networked_Grabbable.hyp",
  "created_at": "2025-03-12T03:25:45.227Z",
  "props": {
    "walkAim": {
      "type": "emote",
      "url": "assets/walkAim.glb"
    }
  },
  "script_excerpt": "export default function main(world, app, fetch, props, setTimeout) {\nif (world.isClient) {\n  console.log(\"state\", app.state)\n  let holder = undefined\n  if (holder === undefined && app.state.owner !== undefined) {\n    holder = world.getPlayer(app.state.owner)\n  }\n  const { id: localId } = world.getPlayer()\n  const controls = app.control()\n  const action = app.create('action', {\n    label: 'Pick Up',\n    distance: 3,\n    onTrigger: ({ playerId }) => {\n      action.active = false;\n      app.send('taken', playerId)\n      holder = world.getPlayer(playerId)\n    }\n  });\n  if (holder !== undefined) action.active = false\n\n  app.on('taken', (playerId) => {\n    holder = world.getPlayer(playerId)\n    action.active = false\n  })\n\n  app.on('dropped', () => {\n    holder = undefined\n    action.active = true\n  })\n\n  controls.keyX.onRelease = () => {\n    if (holder === undefined) return\n    if (holder.id !== localId) return\n\n    app.send('dropped')\n\n    holder = undefined\n  }\n\n  app.add(action)\n\n  app.on('lateUpdate', () => {\n    if (holder === undefined) return\n\n    const matrix = holder.getBoneTransform('rightIndexProximal')\n    if (matrix) {\n      app.position.setFromMatrixPosition(matrix)\n      app.quaternion.setFromRotationMatrix(matrix)\n    }\n  })\n}\n\nif (world.isServer) {\n  const state = app.state\n  app.on('taken', (playerId) => {\n    state.owner = playerId\n    app.send('taken', playerId)\n  })\n  app.on('dropped', () => {\n    state.owner = undefined\n    app.send('dropped')\n  })\n}\n}\n",
  "asset_files": [
    "networked-grabbable.glb",
    "networked-grabbable__image.png",
    "walkAim.glb"
  ]
}