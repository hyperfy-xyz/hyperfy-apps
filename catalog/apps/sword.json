{"script_excerpt":"app.configure([\n\n  {\n    key: 'attack1',\n    type: 'file',\n    kind: 'emote',\n    label: 'Attack 1'\n  },\n  {\n    key: 'attack2',\n    type: 'file',\n    kind: 'emote',\n    label: 'Attack 2'\n  }\n])\n\nconst sword = app.get('Sword')\nconst collider = app.get('Sword_Collider')\n\nconst attacks = []\nif (props.attack1) attacks.push(props.attack1.url)\nif (props.attack2) attacks.push(props.attack2.url)\nconst getAttack = () => {\n  const i = num(0, attacks.length-1)\n  console.log(i)\n  return attacks[i]\n}\nconsole.log(attacks)\n\n\nsword.type = 'dynamic'\n\nlet control\n\nconst action = app.create('action', {\n  label: 'Equip',\n  onTrigger: e => {\n    // equip\n    action.active = false\n    collider.active = false\n    control = app.control()\n  }\n})\n\nworld.attach(sword)\nsword.add(action)\n\napp.on('update', delta => {\n  if (control) {\n    if (control.mouseLeft.pressed) {\n      control.setEffect({\n        // snare: 0.8,\n        // duration: 0.3,\n        // emote: getAttack(),\n        \n        snare: 0.8,\n        // freeze: 0.8,\n        duration: 0.3,\n        emote: getAttack(),\n        turn: true\n      })\n    }\n    if (control?.keyQ.pressed) {\n      // un-equip\n      action.active = true\n      collider.active = true\n      control.release()\n      control = null\n    }\n  }\n})\napp.on('lateUpdate', delta => {\n  if (control) {\n    const player = world.getPlayer()\n    const matrix = player.getBoneTransform('rightHand')\n    if (matrix) {\n      sword.position.setFromMatrixPosition(matrix)\n      sword.quaternion.setFromRotationMatrix(matrix)\n    }\n  }\n})\n\n\n","script_path":"assets/04329f2d052547b528bcb23cd898ebdb882ad63e81cbf4c290c1d0185b64d43e.js","source_files":[{"path":"assets/04329f2d052547b528bcb23cd898ebdb882ad63e81cbf4c290c1d0185b64d43e.js","size_bytes":1542},{"path":"assets/9eed8f2520fae4b02052fa66264aec8b8ca285bc004267a5a13f6576d40c22ed.glb","size_bytes":60912},{"path":"assets/cc757d0ba094a1d7e9bdc38e83c35f3c1ccc2fb3733e5f0bf25fd54cec22bb6b.glb","size_bytes":48212},{"path":"blueprint.json","size_bytes":966},{"path":"manifest.json","size_bytes":1305}],"props":{"attack":{"type":"emote","name":"emote-sword-out-slash.glb","url":"asset://9eed8f2520fae4b02052fa66264aec8b8ca285bc004267a5a13f6576d40c22ed.glb"},"attack1":{"type":"emote","name":"emote-sword-out-slash.glb","url":"asset://9eed8f2520fae4b02052fa66264aec8b8ca285bc004267a5a13f6576d40c22ed.glb"},"attack2":{"type":"emote","name":"sword-in-slash.glb","url":"asset://9eed8f2520fae4b02052fa66264aec8b8ca285bc004267a5a13f6576d40c22ed.glb"}},"asset_files":["04329f2d052547b528bcb23cd898ebdb882ad63e81cbf4c290c1d0185b64d43e.js","9eed8f2520fae4b02052fa66264aec8b8ca285bc004267a5a13f6576d40c22ed.glb","cc757d0ba094a1d7e9bdc38e83c35f3c1ccc2fb3733e5f0bf25fd54cec22bb6b.glb"],"blueprint_path":"blueprint.json"}