{"script_excerpt":"app.configure([\n  {\n    key: \"walk\",\n    type: \"file\",\n    kind: \"emote\",\n    label: \"Walk\",\n  },\n  {\n    key: \"run\",\n    type: \"file\",\n    kind: \"emote\",\n    label: \"Run\",\n  },\n  {\n    key: \"idle\",\n    type: \"file\",\n    kind: \"emote\",\n    label: \"Idle\",\n  },\n  {\n    key: \"animButton\",\n    label: \"attack\",\n    type: \"button\",\n    onClick: () => {\n      app.send(\"button_attack\");\n    },\n  },\n]);\n\n\nconsole.log(`app: ${app.instanceId} INIT`);\nconst avatar = app.get(\"avatar\");\n\nconst body = app.create('rigidbody', { type: 'kinematic', tag: 'mob:1' })\n// const overlapLayerMask = world.createLayerMask('environment')\nconst collider = app.create('collider',\n  {\n    type: 'box', \n    size: [0.3, 1.6, 0.3], \n    trigger: true,\n    layer: 'environment'\n  })\nbody.onTriggerEnter = (foo) => {\n  console.log(foo)\n}\nbody.add(collider)\napp.add(body)\n\n// Constants for hit detection\nconst HIT_DISTANCE = 1.2; // Distance in front of NPC for hit detection\nconst HIT_HEIGHT_OFFSET = 1.0; // Height offset for hit detection (target player torso)\n\n// Vector and math utilities for hit calculation\nconst forward = new Vector3(0, 0, -1);\nconst npcPosition = new Vector3();\nconst npcDirection = new Vector3();\nconst hitPosition = new Vector3();\nconst npcQuaternion = new Quaternion();\nconst hitPositionArray = [];\n\nif (world.isServer) {\n  // Store attack animations with their individual cooldowns\n  const attackAnimations = [];\n  let defaultCooldown = 2.5; // Default cooldown in seconds\n  let canAttack = true; // Track if NPC can attack\n\n  // Listen for attack animations from the sword\n  world.on(`npc:${app.instanceId}:receiveAttackAnimations`, (data) => {\n    console.log(`NPC ${app.instanceId} received attack animations:`, data);\n    if (data.attacks && data.attacks.length > 0) {\n      attackAnimations.length = 0; // Clear existing animations\n      data.attacks.forEach((anim) => attackAnimations.push(anim));\n\n      // Store default cooldown value if provided\n      if (data.defaultCooldown) {\n        d","script_path":"assets/ab6c97c63b780cc45c79b6f8de8b1aa0f7b5fa0db489c0fc94d484455751be06.js","source_files":[{"path":"assets/07b3242f54f8d99b830605de5dfa0d7a1e8ba34ab3949c0cb2a9cf9f6a8ca4a3.glb","size_bytes":169528},{"path":"assets/268b12ee20dda8564f18e929924f60c164270e122884466908b1ce44d61d92e8.vrm","size_bytes":2324724},{"path":"assets/3e5fc4f1109d342f59583561e21f843235801174052ec403fc32e47683941123.glb","size_bytes":92192},{"path":"assets/43aa6ecfccf3a111926b31a1865bc5875d22c9c54c7d3ad501aeb829082e7a08.glb","size_bytes":58476},{"path":"assets/468eaa14d7fdc09b16c775d88253c74c2caa82c4866fb29e23d36779556288c1.vrm","size_bytes":4817240},{"path":"assets/9024142f4ec60c732c9bd0af95ea6ad6076d56d6206f86b838ad6f7f7b3ff5d4.mp3","size_bytes":26582},{"path":"assets/ab6c97c63b780cc45c79b6f8de8b1aa0f7b5fa0db489c0fc94d484455751be06.js","size_bytes":6627},{"path":"assets/c56b4f79ae304b31ee0f81ebd66b8f5a906ff508d739bf9deeafe7b68484efbe.glb","size_bytes":88600},{"path":"assets/fb2ffd4513c0ef0fd3018b0454004908e4f6ca913309c0e76bc7f118fd217c83.glb","size_bytes":123908},{"path":"blueprint.json","size_bytes":2060},{"path":"manifest.json","size_bytes":2613}],"props":{"emote":{"type":"emote","name":"sit.glb","url":"asset://43aa6ecfccf3a111926b31a1865bc5875d22c9c54c7d3ad501aeb829082e7a08.glb"},"avatar":{"type":"avatar","name":"cloneforce-male.vrm","url":"asset://268b12ee20dda8564f18e929924f60c164270e122884466908b1ce44d61d92e8.vrm"},"walk":{"type":"emote","name":"Walking With A Swagger (1).glb","url":"asset://fb2ffd4513c0ef0fd3018b0454004908e4f6ca913309c0e76bc7f118fd217c83.glb"},"idle":{"type":"emote","name":"emote-idle.glb","url":"asset://c56b4f79ae304b31ee0f81ebd66b8f5a906ff508d739bf9deeafe7b68484efbe.glb"},"talk":{"type":"emote","name":"Looking With Hand Shading Eyes.glb","url":"asset://07b3242f54f8d99b830605de5dfa0d7a1e8ba34ab3949c0cb2a9cf9f6a8ca4a3.glb"},"run":{"type":"emote","name":"emote-run.glb","url":"asset://3e5fc4f1109d342f59583561e21f843235801174052ec403fc32e47683941123.glb"},"refDistance":5,"maxDistance":15,"rolloffFactor":5,"distanceModel":"inverse","fireAudio":{"type":"audio","name":"raptordouble.mp3","url":"asset://9024142f4ec60c732c9bd0af95ea6ad6076d56d6206f86b838ad6f7f7b3ff5d4.mp3"},"playbackRate":1,"pauseDuration":2,"raptorAudio":{"type":"audio","name":"raptordouble.mp3","url":"asset://9024142f4ec60c732c9bd0af95ea6ad6076d56d6206f86b838ad6f7f7b3ff5d4.mp3"},"detectionRange":15,"fovAngle":120,"chasePlayer":true,"followDistance":3,"memoryDuration":5},"asset_files":["07b3242f54f8d99b830605de5dfa0d7a1e8ba34ab3949c0cb2a9cf9f6a8ca4a3.glb","268b12ee20dda8564f18e929924f60c164270e122884466908b1ce44d61d92e8.vrm","3e5fc4f1109d342f59583561e21f843235801174052ec403fc32e47683941123.glb","43aa6ecfccf3a111926b31a1865bc5875d22c9c54c7d3ad501aeb829082e7a08.glb","468eaa14d7fdc09b16c775d88253c74c2caa82c4866fb29e23d36779556288c1.vrm","9024142f4ec60c732c9bd0af95ea6ad6076d56d6206f86b838ad6f7f7b3ff5d4.mp3","ab6c97c63b780cc45c79b6f8de8b1aa0f7b5fa0db489c0fc94d484455751be06.js","c56b4f79ae304b31ee0f81ebd66b8f5a906ff508d739bf9deeafe7b68484efbe.glb","fb2ffd4513c0ef0fd3018b0454004908e4f6ca913309c0e76bc7f118fd217c83.glb"],"blueprint_path":"blueprint.json"}