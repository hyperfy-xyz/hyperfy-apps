{"script_excerpt":"// =================================================================\n// Avatar Behavior System\n// A sophisticated system for managing avatar animations and interactions\n// based on player distance and API triggers\n// =================================================================\n\n// Timing Constants - Control duration of various animations and effects\nconst BUBBLE_TIME = 5    // How long speech bubbles remain visible (seconds)\nconst EMOTE_TIME = 2     // Duration of emote animations (seconds)\nconst LOOK_TIME = 5      // Duration of eye contact maintenance (seconds)\n\n// Distance Thresholds - Define interaction zones (in meters)\n// These determine when different animations and behaviors trigger\nconst VERY_FAR_DISTANCE = 10    // Beyond this: minimal interaction\nconst FAR_DISTANCE = 5          // Far zone: initial acknowledgment\nconst MEDIUM_DISTANCE = 2       // Medium zone: welcoming interactions\nconst CLOSE_DISTANCE = 0        // Close zone: direct conversation\n\n// Utility Constants\nconst UP = new Vector3(0, 1, 0)  // Used for rotation calculations\nconst v1 = new Vector3()         // Reusable vector for calculations\nconst vrm = app.get('avatar')    // Reference to our avatar model\n\n// =================================================================\n// SERVER-SIDE LOGIC\n// Handles API communication and event broadcasting\n// =================================================================\nif (world.isServer) {\n  const config = app.config\n  const state = { ready: true }\n  app.state = state\n  app.send('state', state)\n\n  // Set up avatar controller and position\n  const ctrl = app.create('controller')\n  ctrl.position.copy(app.position)\n  world.add(ctrl)\n  ctrl.quaternion.copy(app.quaternion)\n  ctrl.add(vrm)\n\n  // Map emote names to their corresponding animation URLs\n  const emoteUrls = {}\n  for (let i = 1; i <= 4; i++) {\n    const name = config[`emote${i}Name`]\n    const url = config[`emote${i}`]?.url\n    if (name && url) {\n      emoteUrls[name] = url\n    }\n  }\n\n  //","script_path":"assets/8c2fac87e902811d2192309804600c9921485ed358b521ce109a4c75d21b453c.js","source_files":[{"path":"assets/16c060ec2a214f365e130799b5d95d874b170bd2d8a6c24365aa9573982d1ed6.glb","size_bytes":75976},{"path":"assets/1c3066265c17c7491c4c58fb651dabed0d0d269a8b6fb141d47f3482e360a29c.glb","size_bytes":158744},{"path":"assets/2936a0527fa5e851563473e2636bd8a12765cd1f2b85c1260760a0672eaf4ad4.glb","size_bytes":297052},{"path":"assets/71114754534e64bcf90535d582dd72b80c319b2c59ab19a23c9b40d741abdaba.glb","size_bytes":133464},{"path":"assets/8c2fac87e902811d2192309804600c9921485ed358b521ce109a4c75d21b453c.js","size_bytes":16380},{"path":"assets/a39e765561332a778658050991961753bc55e826ea2cc9eb78760bfb7743ee9b.vrm","size_bytes":19032668},{"path":"assets/c56b4f79ae304b31ee0f81ebd66b8f5a906ff508d739bf9deeafe7b68484efbe.glb","size_bytes":88600},{"path":"blueprint.json","size_bytes":1967},{"path":"manifest.json","size_bytes":2100}],"props":{"url":"http://localhost:3001/e0e10e6f-ff2b-0d4c-8011-1fc1eee7cb32/hyperfy","name":"Eliza","context":"DO NOT RESPOND TO OTHER AGENTS","emote":"1","emote0":{"type":"emote","name":"walk-circle.glb","url":"asset://2936a0527fa5e851563473e2636bd8a12765cd1f2b85c1260760a0672eaf4ad4.glb"},"emote1":{"type":"emote","name":"wave-distant.glb","url":"asset://71114754534e64bcf90535d582dd72b80c319b2c59ab19a23c9b40d741abdaba.glb"},"emote1Name":"wave-distant","emote2Name":"wave-close","emote2":{"type":"emote","name":"wave-close.glb","url":"asset://16c060ec2a214f365e130799b5d95d874b170bd2d8a6c24365aa9573982d1ed6.glb"},"emote3Name":"Talking","emote3":{"type":"emote","name":"emote-idle.glb","url":"asset://c56b4f79ae304b31ee0f81ebd66b8f5a906ff508d739bf9deeafe7b68484efbe.glb"},"emote4Name":"talking","emote4":{"type":"emote","name":"talking.glb","url":"asset://1c3066265c17c7491c4c58fb651dabed0d0d269a8b6fb141d47f3482e360a29c.glb"},"idleEmote":{"type":"emote","name":"emote-idle.glb","url":"asset://c56b4f79ae304b31ee0f81ebd66b8f5a906ff508d739bf9deeafe7b68484efbe.glb"}},"asset_files":["16c060ec2a214f365e130799b5d95d874b170bd2d8a6c24365aa9573982d1ed6.glb","1c3066265c17c7491c4c58fb651dabed0d0d269a8b6fb141d47f3482e360a29c.glb","2936a0527fa5e851563473e2636bd8a12765cd1f2b85c1260760a0672eaf4ad4.glb","71114754534e64bcf90535d582dd72b80c319b2c59ab19a23c9b40d741abdaba.glb","8c2fac87e902811d2192309804600c9921485ed358b521ce109a4c75d21b453c.js","a39e765561332a778658050991961753bc55e826ea2cc9eb78760bfb7743ee9b.vrm","c56b4f79ae304b31ee0f81ebd66b8f5a906ff508d739bf9deeafe7b68484efbe.glb"],"blueprint_path":"blueprint.json"}