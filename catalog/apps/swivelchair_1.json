{"script_excerpt":"app.configure([\n  {\n    key: 'emote',\n    type: 'file',\n    kind: 'emote',\n    label: 'Emote',\n  }\n])\n\nconst foo = '\u26a1\ufe0f'\n\nconst state = app.state\nconst chair = app.get('DeskChairTop')\n\nif (world.isServer) {\n  state.y = 0\n  chair.rotation.y = 0\n  app.on('request', playerId => {\n    if (state.playerId) return\n    state.playerId = playerId\n    app.send('playerId', playerId)\n  })\n  app.on('rotate', (y, networkId) => {\n    state.y = y\n    chair.rotation.y = y\n    app.send('rotate', y, networkId)\n  })\n  app.on('release', playerId => {\n    if (state.playerId === playerId) {\n      state.playerId = null\n      app.send('playerId', null)\n    }\n  })\n  world.on('leave', e => {\n    if (state.playerId === e.playerId) {\n      state.playerId = null\n      app.send('playerId', null)\n    }\n  })\n}\n\nif (world.isClient) {\n  const player = world.getPlayer()\n  const anchor = app.create('anchor', { id: 'seat' })\n  anchor.position.y = 0.5\n  anchor.rotation.y += 180 * DEG2RAD\n  chair.add(anchor)\n  const action = app.create('action')\n  action.position.y = 0.7\n  action.label = 'Sit'\n  action.onTrigger = () => {\n    action.active = false\n    app.send('request', player.networkId)\n  }\n  chair.add(action)\n  if (state.y) {\n    chair.rotation.y = state.y\n  }\n  if (state.playerId) {\n    action.active = false\n  }\n  app.on('rotate', y => {\n    state.y = y\n    chair.rotation.y = y\n  })\n  app.on('playerId', playerId => {\n    state.playerId = playerId\n    action.active = !playerId\n    if (playerId === player.networkId) {\n      sit()\n    } else {\n      stand()\n    }\n  })\n  let control \n  function sit() {\n    if (control) return\n    action.active = false\n    control = app.control()\n    control.keyA.capture = true\n    control.keyD.capture = true\n    player.applyEffect({\n      anchor,\n      emote: props.emote?.url,\n      cancellable: true,\n      onEnd: stand\n    })\n    app.on('update', update)\n  }\n\n  function stand() {\n    console.log('STAND')\n    if (!control) return\n    control.release()\n    control = null\n   ","script_path":"assets/c9f29cab509f76a756f3e6f84eaa6700301f21a4a85001eec43d8b85371c948c.js","source_files":[{"path":"assets/17f5651ae11905903d490088d23868d806fb4280fd58f86821673e13e66f2505.glb","size_bytes":223820},{"path":"assets/43aa6ecfccf3a111926b31a1865bc5875d22c9c54c7d3ad501aeb829082e7a08.glb","size_bytes":58476},{"path":"assets/c9f29cab509f76a756f3e6f84eaa6700301f21a4a85001eec43d8b85371c948c.js","size_bytes":2524},{"path":"blueprint.json","size_bytes":611},{"path":"manifest.json","size_bytes":786}],"props":{"emote":{"type":"emote","name":"sit.glb","url":"asset://43aa6ecfccf3a111926b31a1865bc5875d22c9c54c7d3ad501aeb829082e7a08.glb"}},"asset_files":["17f5651ae11905903d490088d23868d806fb4280fd58f86821673e13e66f2505.glb","43aa6ecfccf3a111926b31a1865bc5875d22c9c54c7d3ad501aeb829082e7a08.glb","c9f29cab509f76a756f3e6f84eaa6700301f21a4a85001eec43d8b85371c948c.js"],"blueprint_path":"blueprint.json"}