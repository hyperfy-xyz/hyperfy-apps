{"script_excerpt":"if (world.isServer) {\n  world.on('raybeam', ({ origin, direction }) => {\n    app.send('raybeam', {origin, direction})\n  })\n}\n\nif (world.isClient) {\n  const beam = app.get('Beam')\n  const up = new Vector3(0, 1, 0)\n  const dir = new Vector3()\n  \n  const activeBeams = new Map()\n  \n  beam.scale.set(0.3, 1000, 0.3)\n\n  app.on('raybeam', ({origin, direction}) => {\n    show(origin, direction)\n  })\n\n  function show(origin, direction) {\n    const clone = beam.clone()\n    \n    clone.position.fromArray(origin)\n    clone.quaternion.setFromUnitVectors(up, dir.fromArray(direction))\n    clone.scale.set(0.01, 100, 0.01)\n    \n    world.add(clone)\n    \n    const lifetime = 0.1\n    \n    const beamId = uuid()\n    \n    activeBeams.set(beamId, {\n      element: clone,\n      creationTime: Date.now(),\n      lifetime: lifetime * 1000\n    })\n  }\n  \n  app.on('update', () => {\n    const currentTime = Date.now()\n    const beamsToRemove = []\n    \n    for (const [id, beam] of activeBeams.entries()) {\n      const elapsedTime = currentTime - beam.creationTime\n      \n      if (elapsedTime >= beam.lifetime) {\n        beamsToRemove.push(id)\n      }\n    }\n    \n    for (const id of beamsToRemove) {\n      const beam = activeBeams.get(id)\n      world.remove(beam.element)\n      activeBeams.delete(id)\n    }\n  })\n}","script_path":"assets/b639f3d81758cdf1addfd7ed9a4e8e053e72e98f7e72bcfd0fd44cd69d778702.js","source_files":[{"path":"assets/1e53c9e7a18dfe47743e81a3006b7cd3c1d047e2f710c477c61e2113a1469cc4.glb","size_bytes":4872},{"path":"assets/b639f3d81758cdf1addfd7ed9a4e8e053e72e98f7e72bcfd0fd44cd69d778702.js","size_bytes":1291},{"path":"blueprint.json","size_bytes":509},{"path":"manifest.json","size_bytes":524}],"asset_files":["1e53c9e7a18dfe47743e81a3006b7cd3c1d047e2f710c477c61e2113a1469cc4.glb","b639f3d81758cdf1addfd7ed9a4e8e053e72e98f7e72bcfd0fd44cd69d778702.js"],"blueprint_path":"blueprint.json"}