{"script_excerpt":"const BUBBLE_TIME = 5\nconst EMOTE_TIME = 2\nconst LOOK_TIME = 5\n\nconst UP = new Vector3(0, 1, 0)\n\nconst v1 = new Vector3()\nconst v2 = new Vector3()\nconst v3 = new Vector3()\nconst q1 = new Quaternion()\nconst q2 = new Quaternion()\nconst m1 = new Matrix4()\n\nconst vrm = app.get('avatar')\n\n// SERVER\n\nif (world.isServer) {\nconst config = app.config\n  // send initial state\n  const state = {\n    ready: true,\n  }\n  app.state = state\n  app.send('state', state)\n  // spawn controller\n  const ctrl = app.create('controller')\n  ctrl.position.copy(app.position)\n  world.add(ctrl)\n  ctrl.quaternion.copy(app.quaternion)\n  ctrl.add(vrm)\n  // read emotes\n  const emoteUrls = {}\n  if (config.emote1Name && config.emote1?.url) {\n    emoteUrls[config.emote1Name] = config.emote1.url\n  }\n  if (config.emote2Name && config.emote2?.url) {\n    emoteUrls[config.emote2Name] = config.emote2.url\n  }\n  if (config.emote3Name && config.emote3?.url) {\n    emoteUrls[config.emote3Name] = config.emote3.url\n  }\n  if (config.emote4Name && config.emote4?.url) {\n    emoteUrls[config.emote4Name] = config.emote4.url\n  }\n  // observe environment\n  let changed = true\n  let notifying = false\n  const info = {\n    world: {\n      id: null, // todo\n      name: null, // todo\n      url: null, // todo\n      context: config.context || 'You are in a virtual world powered by Hyperfy',\n    },\n    you: {\n      id: app.instanceId,\n      name: config.name,\n    },\n    emotes: Object.keys(emoteUrls),\n    triggers: [],\n    events: [],\n  }\n  world.on('enter', player => {\n    info.events.push({\n      type: 'player-enter',\n      playerId: player.entityId,\n    })\n    changed = true\n  })\n  world.on('leave', player => {\n    info.events.push({\n      type: 'player-leave',\n      playerId: player.entityId,\n    })\n    changed = true\n  })\n  world.on('chat', msg => {\n    if (msg.fromId === app.instanceId) return\n    if(!msg.body) return\n    info.events.push({\n      type: 'chat',\n      ...msg,\n    })\n    if (info.events.length > 16) {\n      info.ev","script_path":"assets/74beb8f3c86c8c4147ee28503e8d4d053d528b67d951a7a8d189182aa6c53fd5.js","source_files":[{"path":"assets/74beb8f3c86c8c4147ee28503e8d4d053d528b67d951a7a8d189182aa6c53fd5.js","size_bytes":6942},{"path":"assets/a39e765561332a778658050991961753bc55e826ea2cc9eb78760bfb7743ee9b.vrm","size_bytes":19032668},{"path":"blueprint.json","size_bytes":382},{"path":"manifest.json","size_bytes":536}],"props":{"url":"https://agents.dcl.guru/eliza/hyperfy","name":"Eliza","context":"DO NOT RESPOND TO OTHER AGENTS"},"asset_files":["74beb8f3c86c8c4147ee28503e8d4d053d528b67d951a7a8d189182aa6c53fd5.js","a39e765561332a778658050991961753bc55e826ea2cc9eb78760bfb7743ee9b.vrm"],"blueprint_path":"blueprint.json"}