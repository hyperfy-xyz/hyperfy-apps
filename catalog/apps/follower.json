{"script_excerpt":"app.configure([\n  {\n    key: 'sound',\n    type: 'file',\n    kind: 'audio',\n    label: 'Sound'\n  }\n])\n\nif (world.isClient) {\n\n  if (config.sound) {\n    const audio = app.create('audio', {\n      src: config.sound.url\n    })\n    app.add(audio)\n    audio.play()\n  }\n\n  // Configuration:\n  const safeDistance = 3;         // Distance threshold (in meters) for switching to avoid mode.\n  const followMargin = 0.5;       // Extra distance for switching back to follow mode.\n  const moveSpeed = 1;            // Movement speed (units per second) for following/avoiding.\n  const orbitSpeed = 1;           // Orbit (idle) speed when the player is stationary.\n  const rotationSpeed = 2;        // Rotation interpolation speed (radians per second)\n  const playerMovementThreshold = 0.01; // If the player's movement is below this, consider them stationary.\n  \n  // Track the current behavior mode. Start in \"follow\" mode.\n  let currentMode = \"follow\";\n  \n  // Store the player's last position for movement detection.\n  let lastPlayerPosition = null;\n  \n  app.on('update', delta => {\n    const player = world.getPlayer();\n    if (!player) return;\n    \n    // Initialize lastPlayerPosition if needed.\n    if (!lastPlayerPosition) {\n      lastPlayerPosition = player.position.clone();\n    }\n    \n    // Calculate the distance between the player and the object.\n    const distance = player.position.distanceTo(app.position);\n    \n    // Update mode based on distance with hysteresis:\n    if (currentMode === \"follow\" && distance < safeDistance) {\n      currentMode = \"avoid\";\n    } else if (currentMode === \"avoid\" && distance > safeDistance + followMargin) {\n      currentMode = \"follow\";\n    }\n    \n    // Determine how much the player moved since last frame.\n    const playerMovement = new Vector3().subVectors(player.position, lastPlayerPosition);\n    const playerSpeed = playerMovement.length();\n    \n    // Determine movement direction.\n    const moveDirection = new Vector3();\n    if (currentMode === \"avoid\")","script_path":"assets/33540f7a32b49189d603b5e5c569128c437f06bda62447e4143db2031f89a4e3.js","source_files":[{"path":"assets/1476760fdb0e1f8ad9e5c591029f12ad58890ae5cf57b1f44454d6528fa77255.mp3","size_bytes":404816},{"path":"assets/28a2e22801904ade0436588350af3b59174a4e129326f0e4b52f6474f9cf5383.glb","size_bytes":176868},{"path":"assets/33540f7a32b49189d603b5e5c569128c437f06bda62447e4143db2031f89a4e3.js","size_bytes":3922},{"path":"blueprint.json","size_bytes":679},{"path":"manifest.json","size_bytes":780}],"props":{"sound":{"type":"audio","name":"mixkit-mystwrious-bass-pulse-2298.mp3","url":"asset://1476760fdb0e1f8ad9e5c591029f12ad58890ae5cf57b1f44454d6528fa77255.mp3"}},"asset_files":["1476760fdb0e1f8ad9e5c591029f12ad58890ae5cf57b1f44454d6528fa77255.mp3","28a2e22801904ade0436588350af3b59174a4e129326f0e4b52f6474f9cf5383.glb","33540f7a32b49189d603b5e5c569128c437f06bda62447e4143db2031f89a4e3.js"],"blueprint_path":"blueprint.json"}