{"script_excerpt":"export default function main(world, app, fetch, props, setTimeout) {\n/**\n * Minimal clickable MP3 player (client-side)\n *\n * @author Valiant\n * @license MIT\n * Copyright (c) 2026 Valiant\n *\n * - Either upload a file (plays by default), or paste a URL\n * - Click the first mesh in the GLB to play/pause\n */\n\napp.configure([\n  { key: 'file', type: 'file', kind: 'audio', label: 'Audio File (upload)' },\n  { key: 'url', type: 'text', label: 'Audio URL (mp3)', placeholder: 'https://.../file.mp3' },\n\n  { key: 'volume', type: 'number', label: 'Volume', dp: 2, step: 0.1, bigStep: 1, initial: 1 },\n  { key: 'loop', type: 'toggle', label: 'Loop', initial: true },\n  { key: 'global', type: 'toggle', label: 'Global (non-spatial)', initial: true },\n\n  { key: 'autoPlayUploaded', type: 'toggle', label: 'Auto-play uploaded file', initial: true },\n]);\n\nfunction findFirstMesh(root) {\n  const stack = [root];\n  while (stack.length) {\n    const n = stack.pop();\n    if (n && n.name === 'mesh') return n;\n    if (n && n.children) for (let i = n.children.length - 1; i >= 0; i--) stack.push(n.children[i]);\n  }\n  return null;\n}\n\nfunction getSrc() {\n  // Prefer uploaded file if present; else URL text\n  const fileUrl = props.file?.url ? String(props.file.url).trim() : '';\n  if (fileUrl) return fileUrl;\n\n  const url = props.url ? String(props.url).trim() : '';\n  return url;\n}\n\nlet sound;\nlet playing = false;\n\nif (world.isClient) {\n  const target = findFirstMesh(app);\n  if (target) target.cursor = 'pointer';\n\n  const src = getSrc();\n\n  sound = app.create('audio', {\n    src,\n    volume: props.volume ?? 1,\n    loop: !!props.loop,\n    spatial: props.global ? false : true,\n    group: 'music',\n  });\n  app.add(sound);\n\n  // Attempt auto-play if an uploaded file exists.\n  // Note: browsers may still require a user gesture before audio is allowed.\n  const hasUploaded = !!props.file?.url;\n  if (hasUploaded && props.autoPlayUploaded) {\n    const p = sound.play?.();\n    if (p && p.catch) p.catch(() => {});\n    p","script_path":"index.js","source_files":[{"path":"BasicMp3Player.json","size_bytes":557},{"path":"assets/basicmp3player.glb","size_bytes":3380},{"path":"assets/basicmp3player__image.png","size_bytes":2777},{"path":"index.js","size_bytes":2712}],"props":{"collision":true,"url":"","loop":true,"volume":1,"spatial":true,"distance":10,"rolloff":3,"global":true,"autoPlayUploaded":true},"asset_files":["basicmp3player.glb","basicmp3player__image.png"],"blueprint_path":"BasicMp3Player.json"}