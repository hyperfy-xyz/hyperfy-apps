# Machine_Gun_v8.hyp

## Metadata
- **Author**: Saori
- **Channel**: #ðŸŽ¨â”‚showcase
- **Date**: 2025-03-30
- **Size**: 1,929,038 bytes

## Blueprint
- **Name**: Machine Gun v8
- **Version**: 21
- **Model**: `asset://775566e2dedd6d2e9d4b91215c418fe771e51b9c7ae8f06c4d38219d1149f303.glb`
- **Script**: `asset://76baebe56b38216ad5412960443792560bb0927daddefbf3a74ad5994881f603.js`

## Props
- `walkAim`: emote â†’ `asset://809db322bcf5ccb00933db8e3e54a5bcb5537f9c12fa94cf3d3e6085eb733b66.glb`
- `idle`: emote â†’ `asset://485623dd20a3d7eb85434fdeba53a7169e720b2cd3eee1451e89e1eb6763e353.glb`
- `walk`: emote â†’ `asset://c8b956774ac7afcd18c4ffe4921fb46a77370c32465f9dc5e2935e76b997ad2a.glb`
- `run`: emote â†’ `asset://809db322bcf5ccb00933db8e3e54a5bcb5537f9c12fa94cf3d3e6085eb733b66.glb`
- `walkBack`: emote â†’ `asset://3f25cdec89613a6bd577ffe5bb2ead3ba467f53678ba7e3523c79a4764092328.glb`
- `walkLeft`: emote â†’ `asset://7a0507f3183817e60c0d906966838d1683208f19fa82f9670c39d4a845f87b37.glb`
- `walkRight`: emote â†’ `asset://3c238a8e7946dab8dfc84fd33d6ed9b0858eaf8a25760fa3abdd97e8eab2d707.glb`
- `walkBackLeft`: emote â†’ `asset://13f25229e190705f3cb31e7c3197c6bb14cdbeb4ab5fddb2ebfb06b44d022e1f.glb`
- `walkBackRight`: emote â†’ `asset://5e07ff4cf6c529d20710b8f674b43742bf98b4416262ae40672492bbc7ec61ee.glb`
- `sprintBackright`: emote â†’ `asset://54ea4fb02dfcea6977208ad46f6b41d86f72096a70a8b0b109b811acccbed4a7.glb`
- `sprintBackRight`: emote â†’ `asset://54ea4fb02dfcea6977208ad46f6b41d86f72096a70a8b0b109b811acccbed4a7.glb`
- `sprintBackLeft`: emote â†’ `asset://265a8b00248f2e8236f9bfd600f80bb3ecb1c07eb7740c3be07e062e8769621b.glb`
- `walkForwardLeft`: emote â†’ `asset://53ae8ceaed1941b8201257a9cc1dd5df5793c15cde3346bb208c98555eb6df84.glb`
- `walkForwardRight`: emote â†’ `asset://73743909f5a9a886cd5ad9aa964b6c9e90d0fb13d3c381e125a2d54cb83e5ee3.glb`
- `sprintForwardRight`: emote â†’ `asset://f154ac4c8e88f146d69c67816be0e169635c4760c8b6c3833ff5a7823e9fdee0.glb`
- `sprintForwardLeft`: emote â†’ `asset://20b023820e2aacbfdbde243461d05a776b78b6a24a4cd3dbe98df950f3bbb724.glb`
- `sprintBackward`: emote â†’ `asset://64ce7a7cac1d6b8b390d1b7731dafbdcfa004bb2c916349dd674196a119e51ce.glb`
- `sprintLeft`: emote â†’ `asset://046594ab0e939004aa1230f1ceaa2700fd058b226b7d833492a43346a2109d78.glb`
- `sprintRight`: emote â†’ `asset://79b2b1ecb3283926154521dbfbc9ee6c06a364acbd00bc1de59fd3fefa8ba34b.glb`
- `jump`: emote â†’ `asset://7cd2b446e7198883603a40ff49e52fc7b1675118e06106942dd4e325ba338da7.glb`
- `reload`: emote â†’ `asset://112447b90fc4c0422f9816ce788159066ab44e8d9567ed393d39957c86df7c06.glb`
- `audio`: audio â†’ `asset://3beb207e2ae7db4516b9cbfc2a44c1e9c65b971377b90c86522ff75ac2249c17.mp3`

## Assets
- `[model]` 775566e2dedd6d2e9d4b91215c418fe771e51b9c7ae8f06c4d38219d1149f303.glb (87,980 bytes)
- `[script]` 76baebe56b38216ad5412960443792560bb0927daddefbf3a74ad5994881f603.js (13,201 bytes)
- `[emote]` 809db322bcf5ccb00933db8e3e54a5bcb5537f9c12fa94cf3d3e6085eb733b66.glb (74,236 bytes)
- `[emote]` 485623dd20a3d7eb85434fdeba53a7169e720b2cd3eee1451e89e1eb6763e353.glb (141,144 bytes)
- `[emote]` c8b956774ac7afcd18c4ffe4921fb46a77370c32465f9dc5e2935e76b997ad2a.glb (83,212 bytes)
- `[emote]` 809db322bcf5ccb00933db8e3e54a5bcb5537f9c12fa94cf3d3e6085eb733b66.glb (74,236 bytes)
- `[emote]` 3f25cdec89613a6bd577ffe5bb2ead3ba467f53678ba7e3523c79a4764092328.glb (79,844 bytes)
- `[emote]` 7a0507f3183817e60c0d906966838d1683208f19fa82f9670c39d4a845f87b37.glb (79,836 bytes)
- `[emote]` 3c238a8e7946dab8dfc84fd33d6ed9b0858eaf8a25760fa3abdd97e8eab2d707.glb (79,856 bytes)
- `[emote]` 13f25229e190705f3cb31e7c3197c6bb14cdbeb4ab5fddb2ebfb06b44d022e1f.glb (79,832 bytes)
- `[emote]` 5e07ff4cf6c529d20710b8f674b43742bf98b4416262ae40672492bbc7ec61ee.glb (79,852 bytes)
- `[emote]` 54ea4fb02dfcea6977208ad46f6b41d86f72096a70a8b0b109b811acccbed4a7.glb (74,244 bytes)
- `[emote]` 54ea4fb02dfcea6977208ad46f6b41d86f72096a70a8b0b109b811acccbed4a7.glb (74,244 bytes)
- `[emote]` 265a8b00248f2e8236f9bfd600f80bb3ecb1c07eb7740c3be07e062e8769621b.glb (74,228 bytes)
- `[emote]` 53ae8ceaed1941b8201257a9cc1dd5df5793c15cde3346bb208c98555eb6df84.glb (79,848 bytes)
- `[emote]` 73743909f5a9a886cd5ad9aa964b6c9e90d0fb13d3c381e125a2d54cb83e5ee3.glb (79,832 bytes)
- `[emote]` f154ac4c8e88f146d69c67816be0e169635c4760c8b6c3833ff5a7823e9fdee0.glb (74,232 bytes)
- `[emote]` 20b023820e2aacbfdbde243461d05a776b78b6a24a4cd3dbe98df950f3bbb724.glb (74,232 bytes)
- `[emote]` 64ce7a7cac1d6b8b390d1b7731dafbdcfa004bb2c916349dd674196a119e51ce.glb (74,248 bytes)
- `[emote]` 046594ab0e939004aa1230f1ceaa2700fd058b226b7d833492a43346a2109d78.glb (74,252 bytes)
- `[emote]` 79b2b1ecb3283926154521dbfbc9ee6c06a364acbd00bc1de59fd3fefa8ba34b.glb (74,240 bytes)
- `[emote]` 7cd2b446e7198883603a40ff49e52fc7b1675118e06106942dd4e325ba338da7.glb (77,960 bytes)
- `[emote]` 112447b90fc4c0422f9816ce788159066ab44e8d9567ed393d39957c86df7c06.glb (201,780 bytes)
- `[audio]` 3beb207e2ae7db4516b9cbfc2a44c1e9c65b971377b90c86522ff75ac2249c17.mp3 (15,444 bytes)

## Script Analysis
**App Methods**: `app.add()`, `app.configure()`, `app.control()`, `app.create()`, `app.emit()`, `app.on()`, `app.send()`
**World Methods**: `world.add()`, `world.getPlayer()`, `world.raycast()`, `world.remove()`
**Events Listened**: `dropped`, `fixedUpdate`, `lateUpdate`, `overheatStatus`, `shoot`, `taken`, `update`
**Events Emitted**: `shoot`
**Nodes Created**: `action`, `audio`, `ui`, `uiview`

## Keywords (for Discord search)
action, active, addScaledVector, alignSelf, anchorPoint, animation, animationConfig, animationState, animations, applyEffect, applyQuaternion, audio, backgroundColor, backward, borderColor, borderRadius, borderWidth, camPos, camQuat, camera

## Script Source
```javascript
const animations = [
  'idle', 'run', 'walk', 'jump', 'walkBack', 'walkLeft', 'walkRight',
  'sprintLeft', 'sprintRight', 'walkBackLeft', 'walkBackRight',
  'sprintBackRight', 'sprintBackLeft', 'walkForwardLeft', 'walkForwardRight',
  'sprintForwardRight', 'sprintForwardLeft', 'sprintBackward', 'reload'
];

const animationConfig = animations.map(animation => {
  const label = animation.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
  return {
    key: animation,
    type: 'file',
    kind: 'emote',
    label: `${label} Animation`
  };
});

animationConfig.push({
  key: 'audio',
  type: 'file',
  kind: 'audio',
  label: 'Audio'
})

app.configure(animationConfig);

if (world.isClient) {
  let overheatStatus
  let pulseTime = 0;
  let isPulsing = false;

  const OVERHEAT_CONFIG = {
    width: 80,
    height: 10,
    padding: 2,
    borderRadius: 4,
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
    overheatColor: 'rgba(255, 50, 50, 0.9)',
    maxOverheat: 100,
    currentOverheat: 0,
    pulseSpeed: 5,
    pulseMinOpacity: 0.4,
    pulseMaxOpacity: 0.9
  }

  const overheatBarContainer = app.create('ui', {
    width: OVERHEAT_CONFIG.width,
    height: OVERHEAT_CONFIG.height,
    alignSelf: 'center',
    position: [0.5, 1, 0],
    offset: [0, -35, 0],
    space: 'screen',
    anchorPoint: [0.5, 1],
    backgroundColor: OVERHEAT_CONFIG.backgroundColor,
    borderRadius: OVERHEAT_CONFIG.borderRadius,
    padding: OVERHEAT_CONFIG.padding,
    pointerEvents: false,
  });

  const overheatFill = app.create('uiview', {
    width: 0,
    height: OVERHEAT_CONFIG.height - (OVERHEAT_CONFIG.padding * 2),
    backgroundColor: OVERHEAT_CONFIG.overheatColor,
    borderRadius: OVERHEAT_CONFIG.borderRadius / 2,
    pointerEvents: false,
  });
  overheatBarContainer.add(overheatFill);

  app.on('overheatStatus', (data) => {
    overheatStatus = data
    updateOverheat(data.overheat, data.coolingDown)
  })

  function updateOverheat(newOverheat, coolingDown) {
    const overheatValue = Math.max(0, Math.min(newOverheat, OVERHEAT_CONFIG.maxOverheat));
    OVERHEAT_CONFIG.currentOverheat = overheatValue;

    const fillWidth = (overheatValue / OVERHEAT_CONFIG.maxOverheat) * (OVERHEAT_CONFIG.width - (OVERHEAT_CONFIG.padding * 2));
    overheatFill.width = fillWidth;

    if (overheatValue < 33) {
      overheatFill.backgroundColor = 'rgba(255, 200, 200, 0.9)'; // Very light red
    } else if (overheatValue < 66) {
      overheatFill.backgroundColor = 'rgba(255, 120, 120, 0.9)'; // Medium red
    } else {
      overheatFill.backgroundColor = 'rgba(255, 30, 30, 0.9)'; // Intense red
    }

    isPulsing = coolingDown;
    if (coolingDown) {
      pulseTime = 0;
      overheatBarContainer.borderWidth = 1;
      overheatBarContainer.borderColor = 'rgba(255, 100, 100, 0.8)';
    } else {
      overheatBarContainer.borderWidth = 0;
    }
  }

  function updatePulseAnimation(delta) {
    if (isPulsing) {
      pulseTime += delta * OVERHEAT_CONFIG.pulseSpeed;
      const pulseOpacity = OVERHEAT_CONFIG.pulseMinOpacity +
        (Math.sin(pulseTime) * 0.5 + 0.5) *
        (OVERHEAT_CONFIG.pulseMaxOpacity - OVERHEAT_CONFIG.pulseMinOpacity);
      const pulseColor = `rgba(255, 30, 30, ${pulseOpacity})`;
      overheatFill.backgroundColor = pulseColor;
    }
  }

  const v1 = new Vector3()
  const v2 = new Vector3()

  const audio = app.create('audio', {
    src: props.audio?.url,
    volume: 0.75,
    group: 'sfx',
    spatial: true
  })
  app.add(audio)
  const forwardVec = new Vector3(0, 0, -1)
  let currentEffect, holder
  if (!holder && app.state.owner) holder = world.getPlayer(app.state.owner)

  if (app.state.lastPosition && !holder) {
    app.position.set(
      app.state.lastPosition.x,
      app.state.lastPosition.y,
      app.state.lastPosition.z
    )
    if (app.state.lastQuaternion) {
      app.quaternion.set(
        app.state.lastQuaternion.x,
        app.state.lastQuaternion.y,
        app.state.lastQuaternion.z,
        app.state.lastQuaternion.w
      )
    }
  }

  const { id: localId } = world.getPlayer()
  const controls = app.control()
  const action = app.create('action', {
    label: 'Pick Up',
    distance: 3,
    onTrigger: ({ playerId }) => {
      world.add(overheatBarContainer)
      action.active = false
      holder = world.getPlayer(playerId)
      app.send('taken', {
        playerId
      })
      holder.setZoomEnabled(false)
      holder.setZoom(1.5)
      holder.setDoubleJumpEnabled(false)
    }
  })
  if (holder) action.active = false

  app.on('taken', (playerId) => {
    holder = world.getPlayer(playerId)
    action.active = false
  })

  app.on('dropped', () => {
    holder = undefined
    action.active = true
  })

  controls.keyX.onRelease = () => {
    if (!holder || holder.id !== localId) return
    world.remove(overheatBarContainer)
    holder.setZoomEnabled(true)
    holder.setDoubleJumpEnabled(true)

    app.send('dropped', {
      playerId: localId,
      position: {
        x: app.position.x,
        y: app.position.y,
        z: app.position.z
      },
      quaternion: {
        x: app.quaternion.x,
        y: app.quaternion.y,
        z: app.quaternion.z,
        w: app.quaternion.w
      }
    })

    holder = undefined
    currentEffect.cancel()
    action.active = true
  }

  app.add(action)

  const FIRE_RATE = 0.1
  let shootCooldown = 0
  let animationState = 'idle'
  let isZoomedIn = false

  const ZOOM_CONFIG = {
    normalZoom: 1.5,
    scopedZoom: 0.5,
    zoomInDuration: 0.15,
    zoomOutDuration: 0.45,
  }

  let zoomTransition = {
    active: false,
    startValue: ZOOM_CONFIG.normalZoom,
    targetValue: ZOOM_CONFIG.scopedZoom,
    duration: ZOOM_CONFIG.duration,
    elapsed: 0,
    easeInOutQuad: t => t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2
  }

  const onShoot = () => {
    audio.stop()
    const { quaternion: camQuat, position: camPos } = controls.camera
    v1.copy(forwardVec).applyQuaternion(camQuat).normalize()
    v2.copy(camPos).addScaledVector(v1, 0.5)
    const hit = world.raycast(v2, v1, Infinity)
    if (!hit) return
    app.send('shoot', {
      shooter: holder.id,
      shooterHeight: holder.height,
      hitPoint: hit.point.toArray(),
      hitId: hit.playerId || null
    })
    audio.play()
  }

  const onScopeIn = () => {
    if (isZoomedIn) return
    zoomTransition = {
      active: true,
      startValue: ZOOM_CONFIG.normalZoom,
      targetValue: ZOOM_CONFIG.scopedZoom,
      duration: ZOOM_CONFIG.zoomInDuration,
      elapsed: 0,
      easeInOutQuad: t => 1 - Math.pow(1 - t, 3)
    }
    isZoomedIn = true
  }

  const onScopeOut = () => {
    if (!isZoomedIn) return
    zoomTransition = {
      active: true,
      startValue: ZOOM_CONFIG.scopedZoom,
      targetValue: ZOOM_CONFIG.normalZoom,
      duration: ZOOM_CONFIG.zoomOutDuration,
      elapsed: 0,
      easeInOutQuad: t => t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2
    }
    isZoomedIn = false
  }

  controls.mouseRight.onRelease = () => {
    if (!holder || holder.id !== localId) return
    onScopeOut()
  }

  app.on('update', (delta) => {
    if (!holder?.id || localId !== holder?.id) return

    updatePulseAnimation(delta);


    if (shootCooldown > 0) shootCooldown -= delta

    if (zoomTransition.active) {
      zoomTransition.elapsed += delta
      const progress = Math.min(zoomTransition.elapsed / zoomTransition.duration, 1)
      const easedProgress = zoomTransition.easeInOutQuad(progress)
      const zoomDifference = zoomTransition.targetValue - zoomTransition.startValue
      holder.setZoom(zoomTransition.startValue + zoomDifference * easedProgress)
      if (progress >= 1) zoomTransition.active = false
    }

  

// ... truncated ...
```

---
*Extracted from Machine_Gun_v8.hyp. Attachment ID: 1355977141468139540*